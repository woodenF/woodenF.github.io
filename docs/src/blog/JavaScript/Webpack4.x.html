<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Webpack4.x入门 | Kyle</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="icon" href="/docs/src/favicon.ico">
    <meta name="description" content="此时正当修行时">
    <link rel="preload" href="/docs/src/assets/css/0.styles.a9221b09.css" as="style"><link rel="preload" href="/docs/src/assets/js/app.a5a14a4f.js" as="script"><link rel="preload" href="/docs/src/assets/js/2.85084c8c.js" as="script"><link rel="preload" href="/docs/src/assets/js/5.52ec1bff.js" as="script"><link rel="prefetch" href="/docs/src/assets/js/10.9ea76c4a.js"><link rel="prefetch" href="/docs/src/assets/js/11.c1f76f10.js"><link rel="prefetch" href="/docs/src/assets/js/12.8c57afea.js"><link rel="prefetch" href="/docs/src/assets/js/13.86a71a8d.js"><link rel="prefetch" href="/docs/src/assets/js/14.fe5c5ab8.js"><link rel="prefetch" href="/docs/src/assets/js/15.29652af1.js"><link rel="prefetch" href="/docs/src/assets/js/16.59f250bb.js"><link rel="prefetch" href="/docs/src/assets/js/17.6555629d.js"><link rel="prefetch" href="/docs/src/assets/js/18.805e0c35.js"><link rel="prefetch" href="/docs/src/assets/js/19.54674d97.js"><link rel="prefetch" href="/docs/src/assets/js/20.5843b9f0.js"><link rel="prefetch" href="/docs/src/assets/js/21.95013bd9.js"><link rel="prefetch" href="/docs/src/assets/js/3.adbf761b.js"><link rel="prefetch" href="/docs/src/assets/js/4.5e0d83d2.js"><link rel="prefetch" href="/docs/src/assets/js/6.f7f7ba67.js"><link rel="prefetch" href="/docs/src/assets/js/7.07a0e654.js"><link rel="prefetch" href="/docs/src/assets/js/8.886e1602.js"><link rel="prefetch" href="/docs/src/assets/js/9.9ec99ad1.js">
    <link rel="stylesheet" href="/docs/src/assets/css/0.styles.a9221b09.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/src/" class="home-link router-link-active"><!----> <span class="site-name">Kyle</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/src/about/记录.html" class="nav-link">
  记录
</a></div><div class="nav-item"><a href="https://github.com/woodenF" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/src/about/记录.html" class="nav-link">
  记录
</a></div><div class="nav-item"><a href="https://github.com/woodenF" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>JavaScript</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/src/blog/JavaScript/design.html" class="sidebar-link">JavaScript设计模式</a></li><li><a href="/docs/src/blog/JavaScript/maze.html" class="sidebar-link">迷宫生成</a></li><li><a href="/docs/src/blog/JavaScript/judge.html" class="sidebar-link">JavaScript复杂判断的更优雅写法</a></li><li><a href="/docs/src/blog/JavaScript/sudoku.html" class="sidebar-link">数独生成</a></li><li><a href="/docs/src/blog/JavaScript/Webpack4.x.html" class="active sidebar-link">Webpack4.x入门</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/src/blog/JavaScript/Webpack4.x.html#简单的打包例子" class="sidebar-link">简单的打包例子</a></li><li class="sidebar-sub-header"><a href="/docs/src/blog/JavaScript/Webpack4.x.html#构建本地服务" class="sidebar-link">构建本地服务</a></li><li class="sidebar-sub-header"><a href="/docs/src/blog/JavaScript/Webpack4.x.html#loaders" class="sidebar-link">Loaders</a></li><li class="sidebar-sub-header"><a href="/docs/src/blog/JavaScript/Webpack4.x.html#plugins" class="sidebar-link">Plugins</a></li><li class="sidebar-sub-header"><a href="/docs/src/blog/JavaScript/Webpack4.x.html#项目优化" class="sidebar-link">项目优化</a></li><li class="sidebar-sub-header"><a href="/docs/src/blog/JavaScript/Webpack4.x.html#总结" class="sidebar-link">总结</a></li></ul></li><li><a href="/docs/src/blog/JavaScript/VSCodePlugin.html" class="sidebar-link">VSCode 插件</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript深入</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>插件</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="webpack4-x入门"><a href="#webpack4-x入门" class="header-anchor">#</a> Webpack4.x入门</h1> <h2 id="简单的打包例子"><a href="#简单的打包例子" class="header-anchor">#</a> 简单的打包例子</h2> <h4 id="准备"><a href="#准备" class="header-anchor">#</a> 准备</h4> <p>首先创建一个<code>my_project</code>文件夹，进入文件夹，使用npm init初始化生成<code>package.json</code>文件</p> <div class="language-base extra-class"><pre class="language-text"><code>md my_project
cd my_project
npm init
</code></pre></div><p>再在该文件夹下新建<code>dist</code>文件夹以及<code>src</code>文件夹,<code>dist</code>文件夹下新建<code>index.html</code>文件，<code>src</code>文件夹下新建main.js文件以及<code>test.js</code>文件</p> <p>项目目录结构:<br> <img src="data:image/png;base64,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" alt="示例图"></p> <h4 id="安装webpack"><a href="#安装webpack" class="header-anchor">#</a> 安装webpack</h4> <div class="language-base extra-class"><pre class="language-text"><code>npm i webpack -g
npm i webpack webpack-cli -D
</code></pre></div><h4 id="编写代码"><a href="#编写代码" class="header-anchor">#</a> 编写代码</h4> <p>我们在<code>index.html</code>中引入之后打包的js文件</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">&quot;en&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">&quot;UTF-8&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">&quot;viewport&quot;</span> content<span class="token operator">=</span><span class="token string">&quot;width=device-width, initial-scale=1.0&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">&quot;X-UA-Compatible&quot;</span> content<span class="token operator">=</span><span class="token string">&quot;ie=edge&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;app.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>
</code></pre></div><p>在test.js中导出一个模块</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> hw <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    hw<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'Hello Webpack!'</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> hw<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>之后再<code>main.js</code>中引入这个模块</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> hw <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./test'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token function">hw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="使用webpack进行打包"><a href="#使用webpack进行打包" class="header-anchor">#</a> 使用webpack进行打包</h4> <div class="language-base extra-class"><pre class="language-text"><code>webpack src/main.js --output dist/app.js
</code></pre></div><p>将<code>src</code>目录下的<code>main.js</code>文件打包到<code>dist</code>目录下生成<code>app.js</code>文件</p> <p>此时打开<code>dist</code>目录下的<code>index.html</code>文件即可看到页面上显示Hello webpack!</p> <h4 id="通过配置文件打包"><a href="#通过配置文件打包" class="header-anchor">#</a> 通过配置文件打包</h4> <p>在项目根目录下创建<code>webpack.config.js</code>,并在该文件下写下如下配置</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// 项目入口文件</span>
    entry<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'/src/main.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    output<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 打包文件的存放目录</span>
        path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'/dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">// 打包文件的文件名</span>
        filename<span class="token operator">:</span> <span class="token string">'app.js'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>此时只需在终端中运行<code>webpack</code>命令即可进行打包，这条命令会自动引用根目录下的<code>webpack.config.js</code>的配置进行打包。</p> <h2 id="构建本地服务"><a href="#构建本地服务" class="header-anchor">#</a> 构建本地服务</h2> <p>目前为止我们都是通过打开打包后的文件来查看页面，但在使用Vue、React等框架时都是运行在本地服务器上的</p> <h4 id="webpack-dev-server配置本地服务器"><a href="#webpack-dev-server配置本地服务器" class="header-anchor">#</a> webpack-dev-server配置本地服务器</h4> <p>webpack提供了一个基于<code>node.js</code>的本地开发服务器，因为它是一个单独的组件，所以在webpack中使用前需要先将其安装为项目依赖</p> <div class="language-node extra-class"><pre class="language-text"><code>npm i webpack-dev-server -D
</code></pre></div><p>之后再<code>webpack.config.js</code>中添加<code>devServer</code>的配置</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// 项目入口文件</span>
    entry<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'/src/main.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    output<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 打包文件的存放目录</span>
        path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'/dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">// 打包文件的文件名</span>
        filename<span class="token operator">:</span> <span class="token string">'app.js'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 本地服务器读取文件的目录</span>
        contentBase<span class="token operator">:</span> <span class="token string">'./dist'</span><span class="token punctuation">,</span>
        <span class="token comment">// 本地服务器端口</span>
        port<span class="token operator">:</span> <span class="token string">'8081'</span><span class="token punctuation">,</span>
        <span class="token comment">// 当改变文件时是否刷新页面</span>
        inline<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token comment">// 设置为true时当问不存在的路由跳转到index.html页面</span>
        historyApiFallback<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>然后修改<code>package.json</code>,添加如下启动命令</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;my_project&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;index.js&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack-dev-server --open&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;license&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ISC&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;webpack&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.25.1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;webpack-cli&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.1.2&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;webpack-dev-server&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.1.10&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>其中<code>build</code>命令用于打包，即执行<code>webpack</code>命令,<code>dev</code>为开启一个本地服务器,<code>--open</code>是用于启动完服务器后自动打开浏览器</p> <p>现在在终端输入<code>npm run dev</code>即可运行服务器</p> <h4 id="source-maps"><a href="#source-maps" class="header-anchor">#</a> Source Maps</h4> <p>在开发过程中，代码调试自然是少不了的，而经过打包的文件是不容易找到出错的地方的,<code>Source Map</code>就是用来解决这个问题的
通过将<code>devtool</code>设置为<code>source-map</code>即会在打包时生成打包文件对应的<code>.map</code>文件,更易于调试定位错误</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// 项目入口文件</span>
    entry<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'/src/main.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    output<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 打包文件的存放目录</span>
        path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'/dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">// 打包文件的文件名</span>
        filename<span class="token operator">:</span> <span class="token string">'app.js'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 本地服务器读取文件的目录</span>
        contentBase<span class="token operator">:</span> <span class="token string">'./dist'</span><span class="token punctuation">,</span>
        <span class="token comment">// 本地服务器端口</span>
        port<span class="token operator">:</span> <span class="token string">'8088'</span><span class="token punctuation">,</span>
        <span class="token comment">// 当改变文件时是否刷新页面</span>
        inline<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token comment">// 设置为true时当问不存在的路由跳转到index.html页面</span>
        historyApiFallback<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    devtool<span class="token operator">:</span> <span class="token string">'source-map'</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="loaders"><a href="#loaders" class="header-anchor">#</a> Loaders</h2> <p>通过不同的loader，webpack可以实现对不同格式文件的处理</p> <h4 id="配置css-loader"><a href="#配置css-loader" class="header-anchor">#</a> 配置css-loader</h4> <p>如果我们要加载一个css文件，需要安装配置<code>style-loader</code>和<code>css-loader</code></p> <div class="language-base extra-class"><pre class="language-text"><code>npm i style-loader css-loader -D
</code></pre></div><p>在<code>webpack.config.js</code>文件的<code>module</code>下进行loader的配置</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    devtool<span class="token operator">:</span> <span class="token string">'source-map'</span><span class="token punctuation">,</span>
    <span class="token comment">// 项目入口文件</span>
    entry<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'/src/main.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    output<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 打包文件的存放目录</span>
        path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'/dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">// 打包文件的文件名</span>
        filename<span class="token operator">:</span> <span class="token string">'app.js'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 本地服务器读取文件的目录</span>
        contentBase<span class="token operator">:</span> <span class="token string">'./dist'</span><span class="token punctuation">,</span>
        <span class="token comment">// 本地服务器端口</span>
        port<span class="token operator">:</span> <span class="token string">'8088'</span><span class="token punctuation">,</span>
        <span class="token comment">// 当改变文件时是否刷新页面</span>
        inline<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token comment">// 设置为true时当问不存在的路由跳转到index.html页面</span>
        historyApiFallback<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    module<span class="token operator">:</span> <span class="token punctuation">{</span>
        rules<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
            <span class="token comment">// 匹配的文件</span>
            test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
            <span class="token comment">// 使用的loader</span>
            use<span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在<code>src</code>目录下创建<code>css</code>目录，在该目录下新建<code>app.css</code>文件:</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token comment">/* app.css */</span>
<span class="token selector">body</span><span class="token punctuation">{</span>
    <span class="token property">background</span><span class="token punctuation">:</span> pink<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>然后在main.js中引入</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// main.js</span>
<span class="token keyword">import</span> <span class="token string">'./css/app.css'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> hw <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./test'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token function">hw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>此时运行<code>npm run dev</code>,页面已经变成了粉色</p> <h4 id="配置sass"><a href="#配置sass" class="header-anchor">#</a> 配置sass</h4> <div class="language-base extra-class"><pre class="language-text"><code>npm i sass-loader node-sass -D
</code></pre></div><p>增加sass的rules配置:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    devtool<span class="token operator">:</span> <span class="token string">'source-map'</span><span class="token punctuation">,</span>
    <span class="token comment">// 项目入口文件</span>
    entry<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'/src/main.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    output<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 打包文件的存放目录</span>
        path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'/dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">// 打包文件的文件名</span>
        filename<span class="token operator">:</span> <span class="token string">'app.js'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 本地服务器读取文件的目录</span>
        contentBase<span class="token operator">:</span> <span class="token string">'./dist'</span><span class="token punctuation">,</span>
        <span class="token comment">// 本地服务器端口</span>
        port<span class="token operator">:</span> <span class="token string">'8088'</span><span class="token punctuation">,</span>
        <span class="token comment">// 当改变文件时是否刷新页面</span>
        inline<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token comment">// 设置为true时当问不存在的路由跳转到index.html页面</span>
        historyApiFallback<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    module<span class="token operator">:</span> <span class="token punctuation">{</span>
        rules<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
            <span class="token comment">// 匹配的文件</span>
            test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
            <span class="token comment">// 使用的loader</span>
            use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            test<span class="token operator">:</span> <span class="token regex">/\.(scss|sass)$/</span><span class="token punctuation">,</span>
            use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span> <span class="token string">'sass-loader'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在css目录下创建<code>style.scss</code>文件</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token comment">/* style.scss */</span>
$<span class="token property">red</span><span class="token punctuation">:</span> red<span class="token selector">;
body</span><span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> $red<span class="token punctuation">;</span>
<span class="token punctuation">}</span> 
</code></pre></div><p>在<code>main.js</code>中引入<code>style.scss</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token string">'./css/app.css'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./css/style.scss'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> hw <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./test'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token function">hw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>之后使用<code>npm run dev</code>启动服务器，会发现字体变为红色。</p> <h2 id="plugins"><a href="#plugins" class="header-anchor">#</a> Plugins</h2> <p>Plugins(插件)是用来扩展Webpack功能的，它们会在整个构建过程中生效，执行相关的任务。</p> <h4 id="插件如何使用"><a href="#插件如何使用" class="header-anchor">#</a> 插件如何使用</h4> <p>使用某个插件，需要通过<code>npm</code>进行安装，然后在<code>webpack.config.js</code>配置文件的<code>plugins</code>配置项中添加该插件的实例。
到目前为止我们都是使用预先创建好的<code>index.html</code>文件并且手动引入<code>app.js</code>来运行项目，这里我们引入<code>HtmlWebpackPlugin</code>插件来帮我们自动生成<code>index.html</code>并且自动引入打包后的js文件。</p> <p>首先安装插件:</p> <div class="language-base extra-class"><pre class="language-text"><code>npm i html-webpack-plugin -D
</code></pre></div><p>然后我们将<code>dist</code>目录整个删除，再在<code>src</code>目录下新建<code>index.html</code>用作文件模板(不设置<code>HtmlWebpackPlugin</code>也会生成默认的<code>html</code>文件)</p> <p>在<code>webpack.config.js</code>中引入<code>HtmlWebpackPlugin</code>插件:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    devtool<span class="token operator">:</span> <span class="token string">'source-map'</span><span class="token punctuation">,</span>
    <span class="token comment">// 项目入口文件</span>
    entry<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'/src/main.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    output<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 打包文件的存放目录</span>
        path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'/dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">// 打包文件的文件名</span>
        filename<span class="token operator">:</span> <span class="token string">'app.js'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 本地服务器读取文件的目录</span>
        contentBase<span class="token operator">:</span> <span class="token string">'./dist'</span><span class="token punctuation">,</span>
        <span class="token comment">// 本地服务器端口</span>
        port<span class="token operator">:</span> <span class="token string">'8088'</span><span class="token punctuation">,</span>
        <span class="token comment">// 当改变文件时是否刷新页面</span>
        inline<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token comment">// 设置为true时当问不存在的路由跳转到index.html页面</span>
        historyApiFallback<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    module<span class="token operator">:</span> <span class="token punctuation">{</span>
        rules<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
            <span class="token comment">// 匹配的文件</span>
            test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
            <span class="token comment">// 使用的loader</span>
            use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            test<span class="token operator">:</span> <span class="token regex">/\.(scss|sass)$/</span><span class="token punctuation">,</span>
            use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span> <span class="token string">'sass-loader'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            template<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'/src/index.html'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>然后使用<code>npm run build</code>打包，会发现<code>dist</code>目录以及<code>html</code>文件都会自动生成，并且生成的js文件也自动引入到html文件当中</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ie=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="清理dist文件夹"><a href="#清理dist文件夹" class="header-anchor">#</a> 清理<code>dist</code>文件夹</h4> <p>之前我们在每次打包的时候，可能由于以前的代码遗留，导致<code>dist</code>目录比较杂乱，所以通常在每次构建的时候会先清理<code>dist</code>目录，此时就需要使用<code>CleanWebpackPlugin</code>插件</p> <div class="language-base extra-class"><pre class="language-text"><code>npm i clean-webpack-plugin -D
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> CleanWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'clean-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    devtool<span class="token operator">:</span> <span class="token string">'source-map'</span><span class="token punctuation">,</span>
    <span class="token comment">// 项目入口文件</span>
    entry<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'/src/main.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    output<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 打包文件的存放目录</span>
        path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'/dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">// 打包文件的文件名</span>
        filename<span class="token operator">:</span> <span class="token string">'app.js'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 本地服务器读取文件的目录</span>
        contentBase<span class="token operator">:</span> <span class="token string">'./dist'</span><span class="token punctuation">,</span>
        <span class="token comment">// 本地服务器端口</span>
        port<span class="token operator">:</span> <span class="token string">'8088'</span><span class="token punctuation">,</span>
        <span class="token comment">// 当改变文件时是否刷新页面</span>
        inline<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token comment">// 设置为true时当问不存在的路由跳转到index.html页面</span>
        historyApiFallback<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    module<span class="token operator">:</span> <span class="token punctuation">{</span>
        rules<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
            <span class="token comment">// 匹配的文件</span>
            test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
            <span class="token comment">// 使用的loader</span>
            use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            test<span class="token operator">:</span> <span class="token regex">/\.(scss|sass)$/</span><span class="token punctuation">,</span>
            use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span> <span class="token string">'sass-loader'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            template<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'/src/index.html'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'dist'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>现在运行<code>npm run build</code>后，<code>webpack</code>会先将<code>dist</code>目录删除，然后再创建新的<code>dist</code>目录</p> <h4 id="热更新"><a href="#热更新" class="header-anchor">#</a> 热更新</h4> <p><code>HotModuleReplacementPlugin</code>是一个很使用的插件，可以在我们修改代码后自动刷新预览页面</p> <ul><li>需要在<code>devServer</code>配置项中添加<code>hot: true</code>参数</li> <li>在<code>plugins</code>中添加<code>HotModuleReplacementPlugin</code>的配置项，因为<code>HotModuleReplacementPlugin</code>是<code>webpack</code>模块自带的，所以无需额外安装</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> CleanWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'clean-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    devtool<span class="token operator">:</span> <span class="token string">'source-map'</span><span class="token punctuation">,</span>
    <span class="token comment">// 项目入口文件</span>
    entry<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'/src/main.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    output<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 打包文件的存放目录</span>
        path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'/dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">// 打包文件的文件名</span>
        filename<span class="token operator">:</span> <span class="token string">'app.js'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 本地服务器读取文件的目录</span>
        contentBase<span class="token operator">:</span> <span class="token string">'./dist'</span><span class="token punctuation">,</span>
        <span class="token comment">// 本地服务器端口</span>
        port<span class="token operator">:</span> <span class="token string">'8088'</span><span class="token punctuation">,</span>
        <span class="token comment">// 当改变文件时是否刷新页面</span>
        inline<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token comment">// 设置为true时当问不存在的路由跳转到index.html页面</span>
        historyApiFallback<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token comment">// 热更新</span>
        hot<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    module<span class="token operator">:</span> <span class="token punctuation">{</span>
        rules<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
            <span class="token comment">// 匹配的文件</span>
            test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
            <span class="token comment">// 使用的loader</span>
            use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            test<span class="token operator">:</span> <span class="token regex">/\.(scss|sass)$/</span><span class="token punctuation">,</span>
            use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span> <span class="token string">'sass-loader'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            template<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'/src/index.html'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'dist'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>此时运行<code>npm run dev</code>,修改<code>test.js</code>的内容后，预览页面会自动刷新，但因为使用的了<code>source-map</code>的原因，反应会比较慢</p> <h2 id="项目优化"><a href="#项目优化" class="header-anchor">#</a> 项目优化</h2> <h4 id="代码分离"><a href="#代码分离" class="header-anchor">#</a> 代码分离</h4> <p>现在的开发模式都是提倡模块化，我们将前面的<code>webpack.config.js</code>配置文件拆分:</p> <ul><li>在根目录下新建<code>webpack.base.js</code>、<code>webpack.dev.js</code>、<code>webpacl.prod.js</code>,分别代表基础配置文件、开发环境配置文件、生产环境配置文件。</li> <li>安装合并模块插件</li></ul> <div class="language-base extra-class"><pre class="language-text"><code>npm i webpack-merge -D
</code></pre></div><ul><li>将<code>webpack.config.js</code>的代码拆分到上述三个文件中:</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// webpack.base.js</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    devtool<span class="token operator">:</span> <span class="token string">'source-map'</span><span class="token punctuation">,</span>
    <span class="token comment">// 项目入口文件</span>
    entry<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'/src/main.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    output<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 打包文件的存放目录</span>
        path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'/dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">// 打包文件的文件名</span>
        filename<span class="token operator">:</span> <span class="token string">'app.js'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    module<span class="token operator">:</span> <span class="token punctuation">{</span>
        rules<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
            <span class="token comment">// 匹配的文件</span>
            test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
            <span class="token comment">// 使用的loader</span>
            use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            test<span class="token operator">:</span> <span class="token regex">/\.(scss|sass)$/</span><span class="token punctuation">,</span>
            use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span> <span class="token string">'sass-loader'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            template<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'/src/index.html'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// webpack.dev.js</span>
<span class="token keyword">const</span> merge <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-merge'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">const</span> base <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.base.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>base<span class="token punctuation">,</span> <span class="token punctuation">{</span> 
    devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
        contentBase<span class="token operator">:</span> <span class="token string">&quot;./dist&quot;</span><span class="token punctuation">,</span>
        port<span class="token operator">:</span> <span class="token string">&quot;8088&quot;</span><span class="token punctuation">,</span>
        inline<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        historyApiFallback<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        hot<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// webpack.prod.js</span>
<span class="token keyword">const</span> merge <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-merge'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> base <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.base.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> CleanWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'clean-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>base<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    devtool<span class="token operator">:</span> <span class="token string">'source-map'</span><span class="token punctuation">,</span> 
    plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'dist'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>设置<code>package.json</code>的<code>scripts</code>命令</li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;my_project&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;index.js&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --config webpack.prod.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack-dev-server --open --config webpack.dev.js&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;license&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ISC&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;node-sass&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.10.0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;sass-loader&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^7.1.0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;webpack&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.25.1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;webpack-cli&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.1.2&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;webpack-dev-server&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.1.10&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;webpack-merge&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.1.4&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;clean-webpack-plugin&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.0.0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;css-loader&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.0.1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;html-webpack-plugin&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.2.0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;style-loader&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^0.23.1&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>然后删除<code>webpack.config.js</code>，之后运行<code>npm run build</code>以及<code>npm run dev</code>应该和之前的效果一样</p> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p>本文将webpack的常用功能都过了一遍，希望能对你有所帮助!</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/src/blog/JavaScript/sudoku.html" class="prev">
        数独生成
      </a></span> <span class="next"><a href="/docs/src/blog/JavaScript/VSCodePlugin.html">
        VSCode 插件
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/docs/src/assets/js/app.a5a14a4f.js" defer></script><script src="/docs/src/assets/js/2.85084c8c.js" defer></script><script src="/docs/src/assets/js/5.52ec1bff.js" defer></script>
  </body>
</html>
